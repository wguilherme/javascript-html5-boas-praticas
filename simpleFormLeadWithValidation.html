<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>HTML5 Form Validation</title>
  </head>

  <body>
    <script>
      //validacoes
      //
      var campoId = "mobilephone";

      function mascara(o, f) {
        v_obj = o;
        v_fun = f;
        setTimeout("execmascara()", 1);
      }

      function execmascara() {
        v_obj.value = v_fun(v_obj.value);
      }

      function mtel(v) {
        v = v.replace(/\D/g, ""); //Remove tudo o que não é dígito
        v = v.replace(/^(\d{2})(\d)/g, "($1) $2"); //Coloca parênteses em volta dos dois primeiros dígitos
        v = v.replace(/(\d)(\d{4})$/, "$1-$2"); //Coloca hífen entre o quarto e o quinto dígitos
        return v;
      }

      function id(el) {
        return document.getElementById(el);
      }

      window.onload = function() {
        document.getElementById(campoId).maxLength = "15";
        id(campoId).onkeypress = function() {
          mascara(this, mtel);
        };
      };
    </script>

    <!-- oninput="setCustomValidity(''); checkValidity(); setCustomValidity(validity.valid ? '' :'please enter 1234');" -->

    <h1 style="text-align: center; margin-bottom: 20px;">Garanta sua vaga:</h1>

    <form onsubmit="clickSubmit()" id="form-lead">
      <input
        required
        pattern="(\w+\W+){1,10}\w+\W*"
        oninput="setCustomValidity(''); checkValidity(); setCustomValidity(validity.valid ? '' :'Por favor, informe seu Nome e Sobrenome');"
        type="text"
        id="firstname"
        name="firstname"
        placeholder="Nome e Sobrenome"
      />

      <input
        required
        type="email"
        id="email"
        name="email"
        placeholder="Email"
      />
      <input
        required
        pattern="(.){15,15}"
        oninput="setCustomValidity(''); checkValidity(); setCustomValidity(validity.valid ? '' :'Por favor, inclua um número de telefone válido');"
        type="text"
        id="mobilephone"
        name="mobilephone"
        placeholder="WhatsApp"
      />
      <p id="processandoEnvio" style="text-align: center;"></p>
      <button
        id="submit"
        class="botao"
        type="submit"
        value="Enviar"
        style="display: block;"
        "
      >
        <span id="btnTxtSubmit">Enviar</span>
      </button>

      <p id="errosDiv"></p>
    </form>

    <script>
      //texto do botão
      var btnTxtSubmit = "Quero ser aluno";
      var redirectURL = "http://www.google.com";

      //aplica texto botão
      document.querySelector("#submit").innerHTML = btnTxtSubmit;

      //validacao estilo
      //add classe após envio
      document
        .querySelector('[type="submit"]')
        .addEventListener("click", function() {
          this.form.classList.add("submitted");
        });

      //envio do form
      function clickSubmit() {
        console.log('clicou');

        document.querySelector("#processandoEnvio").innerHTML =
          "Processando envio, por favor, aguarde...";
        event.preventDefault();

        //redirect
        setTimeout(function() {
          window.location.href = redirectURL;
        }, 3000);
      }
    </script>

    <style>
      @media screen and (min-width: 800px) {
          
          body {
          background-color: #fff9f1;
          font-family: "helvetica neue", helvetica, arial, sans-serif;
          color: #222;
          width: 700px;
          margin: 0 auto;
          margin-top: 50px;
        }
      }
      @media screen and (max-width: 800px) {
        body {
          background-color: #fff9f1;
          font-family: "helvetica neue", helvetica, arial, sans-serif;
          color: #222;
        }
      }

      #form-lead #form {
        max-width: 700px;
        padding: 2rem;
        box-sizing: border-box;
      }

      #form-lead .form-field {
        display: flex;
        margin: 0 0 1rem 0;
      }

      #form-lead label,
      input {
        display: block;
        width: 100%;
        background-color: #ededed;
        border: none;
        padding: 1.1rem;
        font-weight: 300;
        justify-content: space-between;
        font-size: 1rem;
        text-transform: uppercase;
      }

      #form-lead label {
        text-align: right;
        width: 30%;
      }

      #form-lead input {
        border-radius: 3px;
        margin: 0.5em 0;
      }

      /* ::placeholder {
      } */

      /* Classe para inputs inválidos após o submit */
      #form-lead form.submitted input:invalid {
        border: 1px solid red;
        outline: 0;
      }

      #form-lead .botao {
        display: block;
        position: relative;
        color: #fff;
        text-transform: uppercase;
        background-color: #ff4400;
        border-color: #e67e22;
        padding: 18px 32px;
        font-size: 13px;
        line-height: 20px;
        letter-spacing: 2px;
        font-weight: bold !important;
        margin: 0 auto;
      }

      #form-lead .botao:before {
        display: block;
        content: "";
        position: absolute;
        top: 4px;
        right: 4px;
        bottom: 4px;
        left: 4px;
        border: 1px solid #fff !important;
      }

      #form-lead .botao:hover {
        color: #3a3a3a;
      }
    </style>
  </body>
</html>
